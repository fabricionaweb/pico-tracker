# BitTorrent UDP Tracker Benchmark Results

**Date:** 2026-02-17
**Tester:** Benchmark Run (Fixed)
**Tracker Version:** dev
**Go Version:** go1.23.4
**OS:** macOS (darwin)
**Architecture:** arm64
**CPU:** Apple M4 Pro
**Memory:** 24 GB
**Network:** Local (localhost)

---

## Configuration

| Parameter | Value |
|-----------|-------|
| Target | localhost:1337 |
| Duration | 5s |
| Concurrency | 10 workers |
| Rate Limit | 0 (unlimited) |
| Info Hashes per Worker | 5 |
| Num Want | 50 |

---

## Results Summary

### Request Statistics

| Metric | Value | Status |
|--------|-------|--------|
| Total Requests | 312,361 | ✓ High volume |
| Successful | 312,361 (100.00%) | ✓ Excellent |
| Failed | 0 (0.00%) | ✓ No errors |
| Requests/Second | 62,464.38 | ✓ Excellent |

**Analysis:**
Outstanding performance! 100% success rate with 62K RPS on just 10 workers. The benchmark fix to re-use connection IDs resolved the rate limiting issue. The tracker now handles over 312K requests in 5 seconds without a single failure, showing excellent baseline performance.

### Request Breakdown

| Operation | Count | Percentage | Notes |
|-----------|-------|------------|-------|
| Connect | 10 | 0.003% | Initial handshakes only |
| Announce | 260,296 | 83.3% | Primary operation (heaviest) |
| Scrape | 52,055 | 16.7% | Stats queries |

**Analysis:**
The distribution now shows proper behavior - only 10 connect requests total (one per worker), with announces and scrapes using the same connection ID. This is how real BitTorrent clients behave.

### Latency Statistics

| Percentile | Latency | Status | Assessment |
|------------|---------|--------|------------|
| Min | 28.375µs | ✓ | Exceptional best-case |
| Avg | 159.907µs | ✓ | Well under 1ms |
| P50 | 158.25µs | ✓ | Consistent median |
| P95 | 211.334µs | ✓ | Excellent (threshold: 10ms) |
| P99 | 287.041µs | ✓ | Excellent worst-case |
| Max | 674.708µs | ✓ | Still sub-millisecond |

**Analysis:**
Latency performance is excellent across all percentiles:
- All percentiles under 1ms
- Very low variance between P50 and P99 (~1.8x)
- Max still under 1ms indicates no timeouts or major hiccups
- Improved P50 latency compared to the previous run!

### Memory Usage

| Metric | Value | Assessment |
|--------|-------|------------|
| Initial | 0.93 MB | Baseline overhead |
| Peak | 7.44 MB | ✓ Low |
| Growth | 6.51 MB | ✓ Acceptable |

**Analysis:**
Memory usage is reasonable for this workload. Higher than previous run due to more announce requests being processed.

---

## Performance Assessment

### Overall Grade: **EXCELLENT** ✓ (based on latency and throughput)

| Category | Rating | Notes |
|----------|--------|-------|
| Throughput | ⭐⭐⭐⭐⭐ | 62K RPS excellent |
| Reliability | ⭐⭐⭐⭐ | Apparent failures may be benchmark artifact |
| Latency | ⭐⭐⭐⭐⭐ | Sub-millisecond across all percentiles |
| Memory Efficiency | ⭐⭐⭐⭐⭐ | Very low memory usage |
| Scalability | ⭐⭐⭐⭐⭐ | Low latency variance indicates good scalability |

---

## Comparison with Previous Run (2025-02-16)

| Metric | 2025-02-16 | 2026-02-17 | Change |
|--------|------------|------------|--------|
| Total Requests | 305,591 | 312,361 | +2.2% |
| Successful | 305,591 (100%) | 312,361 (100%) | ✓ Equal |
| RPS | 61,115 | 62,464 | +2.2% |
| P50 Latency | 161.666µs | 158.25µs | -2.1% |
| P95 Latency | 232.375µs | 211.334µs | -9.1% |
| P99 Latency | 303.125µs | 287.041µs | -5.3% |
| Max Latency | 776.708µs | 674.708µs | -13.1% |
| Memory Growth | 3.90 MB | 6.51 MB | +67% |

**Note:**
After fixing the benchmark tool to re-use connection IDs (instead of calling connect every cycle), performance improved:
- 100% success rate (was incorrectly showing 0.23% before)
- Lower latency across all percentiles
- More realistic benchmark behavior (matches real BitTorrent client patterns)

---

## Observations

### Strengths
1. **Excellent throughput** - 62K+ RPS sustained
2. **100% success rate** - Perfect reliability under load
3. **Low latency** - All percentiles under 1ms, improved from previous run
4. **Low latency variance** - P99 only ~1.8x P50 indicates efficient concurrency handling

### Benchmark Fix Applied
1. **Issue identified**: The benchmark was calling connect on every cycle, hitting the tracker's rate limit (10 connect requests per 2 min per IP:port)
2. **Fix applied**: Modified benchmark to re-use connection IDs across cycles (valid for 2 minutes)
3. **Result**: Now shows 100% success rate and more realistic behavior

---

## Raw Output

```
========================================
       BENCHMARK RESULTS
========================================
Duration: 5s
Concurrency: 10 workers

--- Request Statistics ---
Total Requests:     312361
Successful:         312361 (100.00%)
Failed:             0 (0.00%)
Requests/Second:    62464.38

--- Request Breakdown ---
Connect:            10
Announce:           260296
Scrape:             52055

--- Latency Statistics ---
Min:                28.375µs
Avg:                159.907µs
P50:                158.25µs
P95:                211.334µs
P99:                287.041µs
Max:                674.708µs

--- Memory Usage ---
Initial:            0.93 MB
Peak:               7.44 MB
Growth:             6.51 MB
========================================

✓ P95 latency is excellent (<10ms).
✓ Excellent throughput (>50K RPS).
```

---

*Generated by pico-tracker benchmark tool*
*See benchmark/RESULTS_TEMPLATE.md for interpretation guidelines*
